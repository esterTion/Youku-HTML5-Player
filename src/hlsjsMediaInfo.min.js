!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.HlsjsMediaInfoModule=e()}}(function(){var e;return function e(t,r,a){function n(i,f){if(!r[i]){if(!t[i]){var s="function"==typeof require&&require;if(!f&&s)return s(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return n(r||e)},u,u.exports,e,t,r,a)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(t,r,a){!function(t,n){"object"==typeof a&&void 0!==r?r.exports=n():"function"==typeof e&&e.amd?e(n):t.AVLTree=n()}(this,function(){"use strict";function e(e,r){void 0===r&&(r=function(e){return e.key});var a=[];return t(e,"",!0,function(e){return a.push(e)},r),a.join("")}function t(e,r,a,n,o){if(e){n(r+(a?"└── ":"├── ")+o(e)+"\n");var i=r+(a?"    ":"│   ");e.left&&t(e.left,i,!1,n,o),e.right&&t(e.right,i,!0,n,o)}}function r(e){if(null===e)return!0;var t=a(e.left),n=a(e.right);return!!(Math.abs(t-n)<=1&&r(e.left)&&r(e.right))}function a(e){return e?1+Math.max(a(e.left),a(e.right)):0}function n(e,t,r,a,o){var i=o-a;if(i>0){var f=a+Math.floor(i/2),s=t[f],l=r[f],u={key:s,data:l,parent:e};return u.left=n(u,t,r,a,f),u.right=n(u,t,r,f+1,o),u}return null}function o(e){if(null===e)return 0;var t=o(e.left),r=o(e.right);return e.balanceFactor=t-r,Math.max(t,r)+1}function i(e,t,r,a,n){if(!(r>=a)){for(var o=e[r+a>>1],f=r-1,s=a+1;;){do{f++}while(n(e[f],o)<0);do{s--}while(n(e[s],o)>0);if(f>=s)break;var l=e[f];e[f]=e[s],e[s]=l,l=t[f],t[f]=t[s],t[s]=l}i(e,t,r,s,n),i(e,t,s+1,a,n)}}function f(e,t){return e>t?1:e<t?-1:0}function s(e){var t=e.right;return e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.left=e,e.balanceFactor+=1,t.balanceFactor<0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor+=1,e.balanceFactor>0&&(t.balanceFactor+=e.balanceFactor),t}function l(e){var t=e.left;return e.left=t.right,e.left&&(e.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.right=e,e.balanceFactor-=1,t.balanceFactor>0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor-=1,e.balanceFactor<0&&(t.balanceFactor+=e.balanceFactor),t}var u=function(e,t){void 0===t&&(t=!1),this._comparator=e||f,this._root=null,this._size=0,this._noDuplicates=!!t},c={size:{configurable:!0}};return u.prototype.destroy=function(){return this.clear()},u.prototype.clear=function(){return this._root=null,this._size=0,this},c.size.get=function(){return this._size},u.prototype.contains=function(e){if(this._root)for(var t=this._root,r=this._comparator;t;){var a=r(e,t.key);if(0===a)return!0;t=a<0?t.left:t.right}return!1},u.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},u.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},u.prototype.forEach=function(e){for(var t=this._root,r=[],a=!1,n=0;!a;)t?(r.push(t),t=t.left):r.length>0?(t=r.pop(),e(t,n++),t=t.right):a=!0;return this},u.prototype.range=function(e,t,r,a){for(var n=this,o=[],i=this._comparator,f=this._root;0!==o.length||f;)if(f)o.push(f),f=f.left;else{if(f=o.pop(),i(f.key,t)>0)break;if(i(f.key,e)>=0&&r.call(a,f))return n;f=f.right}return this},u.prototype.keys=function(){for(var e=this._root,t=[],r=[],a=!1;!a;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):a=!0;return r},u.prototype.values=function(){for(var e=this._root,t=[],r=[],a=!1;!a;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):a=!0;return r},u.prototype.at=function(e){for(var t=this._root,r=[],a=!1,n=0;!a;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),n===e)return t;n++,t=t.right}else a=!0;return null},u.prototype.minNode=function(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e},u.prototype.maxNode=function(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e},u.prototype.min=function(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e.key},u.prototype.max=function(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e.key},u.prototype.isEmpty=function(){return!this._root},u.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},u.prototype.find=function(e){for(var t,r=this._root,a=r,n=this._comparator;a;){if(0===(t=n(e,a.key)))return a;a=t<0?a.left:a.right}return null},u.prototype.insert=function(e,t){var r=this;if(!this._root)return this._root={parent:null,left:null,right:null,balanceFactor:0,key:e,data:t},this._size++,this._root;var a=this._comparator,n=this._root,o=null,i=0;if(this._noDuplicates)for(;n;){if(i=a(e,n.key),o=n,0===i)return null;n=i<0?n.left:n.right}else for(;n;)i=a(e,n.key),o=n,n=i<=0?n.left:n.right;var f,u={left:null,right:null,balanceFactor:0,parent:o,key:e,data:t};for(i<=0?o.left=u:o.right=u;o&&(i=a(o.key,e),i<0?o.balanceFactor-=1:o.balanceFactor+=1,0!==o.balanceFactor);){if(o.balanceFactor<-1){1===o.right.balanceFactor&&l(o.right),f=s(o),o===r._root&&(r._root=f);break}if(o.balanceFactor>1){-1===o.left.balanceFactor&&s(o.left),f=l(o),o===r._root&&(r._root=f);break}o=o.parent}return this._size++,u},u.prototype.remove=function(e){var t=this;if(!this._root)return null;for(var r=this._root,a=this._comparator,n=0;r&&0!==(n=a(e,r.key));)r=n<0?r.left:r.right;if(!r)return null;var o,i,f=r.key;if(r.left){for(o=r.left;o.left||o.right;){for(;o.right;)o=o.right;r.key=o.key,r.data=o.data,o.left&&(r=o,o=o.left)}r.key=o.key,r.data=o.data,r=o}if(r.right){for(i=r.right;i.left||i.right;){for(;i.left;)i=i.left;r.key=i.key,r.data=i.data,i.right&&(r=i,i=i.right)}r.key=i.key,r.data=i.data,r=i}for(var u,c=r.parent,d=r;c&&(c.left===d?c.balanceFactor-=1:c.balanceFactor+=1,c.balanceFactor<-1?(1===c.right.balanceFactor&&l(c.right),u=s(c),c===t._root&&(t._root=u),c=u):c.balanceFactor>1&&(-1===c.left.balanceFactor&&s(c.left),u=l(c),c===t._root&&(t._root=u),c=u),-1!==c.balanceFactor&&1!==c.balanceFactor);)d=c,c=c.parent;return r.parent&&(r.parent.left===r?r.parent.left=null:r.parent.right=null),r===this._root&&(this._root=null),this._size--,f},u.prototype.load=function(e,t,r){if(void 0===e&&(e=[]),void 0===t&&(t=[]),0!==this._size)throw new Error("bulk-load: tree is not empty");var a=e.length;return r&&i(e,t,0,a-1,this._comparator),this._root=n(null,e,t,0,a),o(this._root),this._size=a,this},u.prototype.isBalanced=function(){return r(this._root)},u.prototype.toString=function(t){return e(this._root,t)},Object.defineProperties(u.prototype,c),u.default=u,u})},{}],2:[function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=function(){function e(t){a(this,e),this.TAG="ExpGolomb",this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}return n(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index;if(e<=0)throw new Error("ExpGolomb: _fillCurrentWord() but no bytes available");var t=Math.min(4,e),r=new Uint8Array(4);r.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(r.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(e>32)throw new Error("ExpGolomb: readBits() bits exceeded max 32bits!");if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var r=this._current_word_bits_left?this._current_word:0;r>>>=32-this._current_word_bits_left;var a=e-this._current_word_bits_left;this._fillCurrentWord();var n=Math.min(a,this._current_word_bits_left),o=this._current_word>>>32-n;return this._current_word<<=n,this._current_word_bits_left-=n,r=r<<n|o}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();r.default=o},{}],3:[function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=e("./mp4-parser.js"),f=a(i),s=e("avl"),l=a(s),u="hlsMIStatPercentage",c=function(){function e(){n(this,e)}return o(e,null,[{key:"observeMediaInfo",value:function(e){function t(t,r){d=!0,h=r.frag,e.downloadPercentage=0,e.trigger(u,0)}function r(t,r){var a=r.stats.loaded/r.stats.total;e.downloadPercentage=a,e.trigger(u,a)}function a(t,r){d=!1,h=null,c+=r.stats.loaded,e.downloadPercentage=0,e.trigger(u,0)}function n(e,t){b=t.level,v[b]=v[b]||{level:b,bitrateMap:[],video:{timeScale:0,samples:new l.default,bitrateMap:[],totalDuration:0,totalSize:0,averageBitrate:0},audio:{timeScale:0,samples:new l.default,bitrateMap:[],totalDuration:0,totalSize:0,averageBitrate:0}},v.current=v[b]}function o(t,r){e.mediaInfo=v[r.level]}function i(e,t){t.level=b,p.push(t)}if(!e.hlsjsMediaInfoObserved){Object.defineProperty(e,"hlsjsMediaInfoObserved",{value:!0,configurable:!1,writable:!1});var s=e.destroy;e.destroy=function(){clearInterval(_),s.call(e,arguments)};var c=0,d=!1,h=null,p=[],v={},b=void 0,_=void 0;_=setInterval(function(){var t=c;c=0,d&&(t+=h.loaded,c=-h.loaded),e.downloadSpeed=t/1024;for(var r=[];p.length;){(function(){var e=p.shift(),t=e.type,a=e.data,n=0,o=v[e.level][t];if(!o)return"continue";for(;n<a.length;){var i=f.default.boxInfo(a,n);if("moov"==i.name||"moof"==i.name){var s={};if(f.default.parseMoov(s,a,0,i.size),"moof"==i.name)!function(){for(var a=o.samples,n=s.moof[0].traf[0],i=n.tfdt.baseMediaDecodeTime,f=[t,Math.floor(i/o.timeScale)],l=0;l<n.trun.sampleCount;l++)a.contains(i)||(a.insert(i,n.trun.sizes[l]),o.totalDuration+=n.trun.durations[l],o.totalSize+=n.trun.sizes[l]),l<n.trun.sampleCount-1&&(i+=n.trun.durations[l]);o.averageBitrate=o.totalSize*o.timeScale/o.totalDuration*8,f.push(Math.ceil(i/o.timeScale)),f.push(e.level),r.push(f);var u=[];a.range(f[1]*o.timeScale,f[2]*o.timeScale,function(e){var t=Math.floor(e.key/o.timeScale);u[t]=u[t]||0,u[t]+=e.data});for(var c=f[1];c<f[2];c++)o.bitrateMap[c]=u[c]}();else if("moov"==i.name)if(o.timeScale=s.moov[0].mvhd.timeScale,"video"==t){var l=s.moov[0].trak[0].mdia[0].minf[0].stbl[0].stsd[0].avc1.extensions.avcC.SPS[0];o.videoCodec=l.codecString,o.width=l.present_size.width,o.height=l.present_size.height,o.fps=l.frame_rate.fps,o.profile=l.profile_string,o.level=l.level_string,o.chromaFormat=l.chroma_format_string,o.sarNum=l.sar_ratio.width,o.sarDen=l.sar_ratio.height}else if("audio"==t){var u=s.moov[0].trak[0].mdia[0].minf[0].stbl[0].stsd[0].mp4a.extensions.esds.esDescription.decConfigDescription.decSpecificDescription;o.audioCodec="mp4a.40."+u.originalAudioObjectType,o.audioSampleRate=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350][u.samplingIndex],o.audioChannelCount=u.channelConfig}}n+=i.size}})()}r.forEach(function(e){for(var t=e[1];t<e[2];t++)v[e[3]].bitrateMap[t]=8*((v[e[3]].video.bitrateMap[t]||0)+(v[e[3]].audio.bitrateMap[t]||0))/1e3})},1e3),e.on(Hls.Events.FRAG_LOADING,t),e.on(Hls.Events.FRAG_LOAD_PROGRESS,r),e.on(Hls.Events.FRAG_LOADED,a),e.on(Hls.Events.BUFFER_APPENDING,i),e.on(Hls.Events.LEVEL_SWITCHING,n),e.on(Hls.Events.LEVEL_SWITCHED,o),e.mediaInfoLevels=v}}}]),e}();r.default=c},{"./mp4-parser.js":5,avl:1}],4:[function(e,t,r){"use strict";t.exports=e("./hls-mediainfo-module.js").default},{"./hls-mediainfo-module.js":3}],5:[function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){return e[t]<<8|e[t+1]}function o(e,t){return 65536*n(e,t)+n(e,t+2)}function i(e,t){return 4294967296*o(e,t)+o(e,t+4)}function f(e,t,r){for(var a=[],n=0;n<r;n++)a.push(e[t+n]);try{return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))}catch(e){return""}}function s(e,t,r){for(var a=t[r],i=1,f=0,l=t[r+i];128&l;)f=(127&l)<<7,i++,l=t[r+i];switch(f+=127&l,i++,a){case 3:var u=n(t,r+i);t[r+i+2];i+=3,e[d[a]]={size:f,trackID:u},s(e[d[a]],t,r+i);break;case 4:var c=t[r+i],h=t[r+i+1],p=16777215&o(t,r+i+1),v=o(t,r+i+5),b=o(t,r+i+9);e[d[a]]={oti:c,streamType:h,bufferSize:p,maxBitrate:v,avgBitrate:b},s(e[d[a]],t,r+i+13);break;case 5:var _=Array.from(new Uint8Array(t.buffer,t.byteOffset+r+i,f)),y=_[0]>>>3,m=(7&_[0])<<1|_[1]>>>7,g=(120&_[1])>>>3;e[d[a]]={data:_,originalAudioObjectType:y,samplingIndex:m,channelConfig:g}}}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),u=e("./sps-parser.js"),c=function(e){return e&&e.__esModule?e:{default:e}}(u),d={3:"esDescription",4:"decConfigDescription",5:"decSpecificDescription"},h=["moov","trak","mdia","minf","stbl","moof","traf"],p=function(){function e(){a(this,e)}return l(e,null,[{key:"boxInfo",value:function(e,t){var r=o(e,t),a=f(e,t+4,4),n=8;1==r&&(r=i(e,t+8),n=16);var s=e.length>=t+r;return 0==r?{size:8,headSize:n,name:"",fullyLoaded:!0}:{size:r,headSize:n,name:a,fullyLoaded:s}}},{key:"parseMoov",value:function(t,r,a,l){for(var u=0;u<l;){var d=e.boxInfo(r,a+u);if(-1!==h.indexOf(d.name))t[d.name]=t[d.name]||[],t[d.name].push({}),e.parseMoov(t[d.name][t[d.name].length-1],r,a+u+8,d.size-8);else{var p=void 0;switch(d.name){case"mvhd":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var v=p[0],b=o(p,1==v?20:12),_=1==v?i(p,24):o(p,16);t[d.name]={version:v,timeScale:b,duration:_};break;case"tkhd":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var y={trackEnbaled:1&p[3],trackInMovie:(2&p[3])>>1,trackInPreview:(4&p[3])>>2,trackInPoster:(8&p[3])>>3},m=o(p,12),g=o(p,20),w=n(p,34),k=parseFloat(n(p,72)+"."+n(p,74)),S=parseFloat(n(p,76)+"."+n(p,78));t[d.name]={flags:y,trackID:m,duration:g,group:w,trackWidth:k,trackHeight:S};break;case"mdhd":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var z=p[0],E=1==z?24:16,U=(1==z?i:o)(p,E);E+=1==z?8:4;var F=n(p,E);t[d.name]={version:z,duration:U,language:F};break;case"stsd":t[d.name]=t[d.name]||[],t[d.name].push({}),e.parseMoov(t[d.name][t[d.name].length-1],r,a+u+16,d.size-16);break;case"avc1":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var B=o(p,4),x=n(p,8),A=n(p,10),O=o(p,12),M=o(p,16),C=o(p,20),G=n(p,24),I=n(p,26),D=parseFloat(n(p,28)+"."+n(p,30)),P=parseFloat(n(p,32)+"."+n(p,34)),j=o(p,36),L=n(p,40),T=f(p,42,32),H=n(p,74),R=n(p,76);t[d.name]={dataReferenceIndex:B,version:x,revisionLevel:A,vendor:O,temporalQuality:M,spatialQuality:C,width:G,height:I,horizontalResolution:D,verticalResolution:P,dataSize:j,frameCount:L,compressorName:T,depth:H,colorTableID:R,extensions:{}},e.parseMoov(t[d.name].extensions,r,a+u+86,d.size-86);break;case"avcC":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);for(var N=p[0],W=p[1],V=p[2],q=p[3],Z=3&p[4],Q=31&p[5],J=new Array(Q),K=void 0,X=6,Y=0;Y<Q;Y++){K=n(p,X),X+=2,J[Y]=c.default.parseSPS(new Uint8Array(r.buffer,r.byteOffset+a+u+8+X,K));for(var $="avc1.",ee=p.subarray(X+1,X+4),te=0;te<3;te++){var re=ee[te].toString(16);re.length<2&&(re="0"+re),$+=re}J[Y].codecString=$,X+=K}Q=p[X];new Array(Q);X++;for(var ae=0;ae<Q;ae++)K=n(p,u),X+=2,X+=K;t[d.name]={configurationVersion:N,avcProfileIndication:W,profile_compatibility:V,AVCLevelIndication:q,lengthSizeMinusOne:Z,SPS:J,data:p};break;case"mp4a":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var ne=o(p,4),oe=n(p,8),ie=n(p,10),fe=o(p,12),se=n(p,16),le=n(p,18),ue=n(p,20),ce=n(p,22),de=n(p,24);t[d.name]={dataReferenceIndex:ne,version:oe,revisionLevel:ie,vendor:fe,channels:se,sampleSize:le,compressionID:ue,packetSize:ce,sampleRate:de,extensions:{}},e.parseMoov(t[d.name].extensions,r,a+u+36,d.size-36);break;case"esds":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var he={};s(he,p,4),t[d.name]=he;break;case"stts":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var pe=o(p,0),ve=[],be=4,_e=0;_e<pe;_e++){var ye=o(p,be),me=o(p,be+4);ve.push({sampleCount:ye,sampleDuration:me}),be+=8}t[d.name]=ve;break;case"ctts":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var ge=o(p,0),we=[],ke=4,Se=0;Se<ge;Se++){var ze=o(p,ke),Ee=o(p,ke+4);we.push({sampleCount:ze,compositionOffset:Ee}),ke+=8}t[d.name]=we;break;case"stss":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var Ue=o(p,0),Fe=new Uint32Array(Ue),Be=4,xe=0;xe<Ue;xe++)Fe[xe]=o(p,Be),Be+=4;t[d.name]=Fe;break;case"stsc":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var Ae=o(p,0),Oe=[],Me=4,Ce=0;Ce<Ae;Ce++){var Ge=o(p,Me),Ie=o(p,Me+4),De=o(p,Me+8);Oe.push({firstChunk:Ge,samplesPerChunk:Ie,sampleDescID:De}),Me+=12}t[d.name]=Oe;break;case"stsz":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var Pe=o(p,0),je=o(p,4),Le=new Uint32Array(je),Te=8,He=0;He<je;He++)Le[He]=o(p,Te),Te+=4;t[d.name]={sampleSize:Pe,sampleTable:Le};break;case"stco":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var Re=o(p,0),Ne=new Uint32Array(Re),We=4,Ve=0;Ve<Re;Ve++)Ne[Ve]=o(p,We),We+=4;t[d.name]=Ne;break;case"co64":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var qe=o(p,0),Ze=new Float64Array(qe),Qe=4,Je=0;Je<qe;Je++)Ze[Je]=i(p,Qe),Qe+=8;t.stco=Ze;break;case"hdlr":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);var Ke=f(p,4,4);t[d.name]={handler:Ke};break;case"tfdt":p=new Uint8Array(r.buffer,r.byteOffset+a+u+8,d.size-8);var Xe=p[0],Ye=(1==Xe?i:o)(p,4);t.tfdt={baseMediaDecodeTime:Ye};break;case"trun":p=new Uint8Array(r.buffer,r.byteOffset+a+u+12,d.size-12);for(var $e=o(p,0),et=new Uint32Array($e),tt=new Uint32Array($e),rt=8,at=0;at<$e;at++)et[at]=o(p,rt),tt[at]=o(p,rt+4),rt+=16;t.trun={sampleCount:$e,durations:et,sizes:tt}}}u+=d.size}}}]),e}();r.default=p},{"./sps-parser.js":6}],6:[function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),o=e("./exp-golomb.js"),i=function(e){return e&&e.__esModule?e:{default:e}}(o),f=function(){function e(){a(this,e)}return n(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,r=t.byteLength,a=new Uint8Array(r),n=0,o=0;o<r;o++)o>=2&&3===t[o]&&0===t[o-1]&&0===t[o-2]||(a[n]=t[o],n++);return new Uint8Array(a.buffer,0,n)}},{key:"parseSPS",value:function(t){var r=e._ebsp2rbsp(t),a=new i.default(r);a.readByte();var n=a.readByte();a.readByte();var o=a.readByte();a.readUEG();var f=e.getProfileString(n),s=e.getLevelString(o),l=1,u=420,c=[0,420,422,444],d=8;if((100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||144===n)&&(l=a.readUEG(),3===l&&a.readBits(1),l<=3&&(u=c[l]),d=a.readUEG()+8,a.readUEG(),a.readBits(1),a.readBool()))for(var h=3!==l?8:12,p=0;p<h;p++)a.readBool()&&(p<6?e._skipScalingList(a,16):e._skipScalingList(a,64));a.readUEG();var v=a.readUEG();if(0===v)a.readUEG();else if(1===v){a.readBits(1),a.readSEG(),a.readSEG();for(var b=a.readUEG(),_=0;_<b;_++)a.readSEG()}a.readUEG(),a.readBits(1);var y=a.readUEG(),m=a.readUEG(),g=a.readBits(1);0===g&&a.readBits(1),a.readBits(1);var w=0,k=0,S=0,z=0;a.readBool()&&(w=a.readUEG(),k=a.readUEG(),S=a.readUEG(),z=a.readUEG());var E=1,U=1,F=0,B=!0,x=0,A=0;if(a.readBool()){if(a.readBool()){var O=a.readByte(),M=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],C=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];O>0&&O<16?(E=M[O-1],U=C[O-1]):255===O&&(E=a.readByte()<<8|a.readByte(),U=a.readByte()<<8|a.readByte())}if(a.readBool()&&a.readBool(),a.readBool()&&(a.readBits(4),a.readBool()&&a.readBits(24)),a.readBool()&&(a.readUEG(),a.readUEG()),a.readBool()){var G=a.readBits(32),I=a.readBits(32);B=a.readBool(),x=I,A=2*G,F=x/A}}var D=1;1===E&&1===U||(D=E/U);var P=0,j=0;if(0===l)P=1,j=2-g;else{var L=3===l?1:2,T=1===l?2:1;P=L,j=T*(2-g)}var H=16*(y+1),R=16*(m+1)*(2-g);H-=(w+k)*P,R-=(S+z)*j;var N=Math.ceil(H*D);return a.destroy(),a=null,{profile_string:f,level_string:s,bit_depth:d,chroma_format:u,chroma_format_string:e.getChromaFormatString(u),frame_rate:{fixed:B,fps:F,fps_den:A,fps_num:x},sar_ratio:{width:E,height:U},codec_size:{width:H,height:R},present_size:{width:N,height:R}}}},{key:"_skipScalingList",value:function(e,t){for(var r=8,a=8,n=0,o=0;o<t;o++)0!==a&&(n=e.readSEG(),a=(r+n+256)%256),r=0===a?r:a}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),e}();r.default=f},{"./exp-golomb.js":2}]},{},[4])(4)});
//# sourceMappingURL=hlsjsMediaInfo.min.js.map
